def secretsFile = new File(getRootDir().getAbsolutePath() + "/secret.properties")

def readProperty(String key, File file) {
    Properties props = new Properties()
    try {
        props.load(new FileInputStream(file))
        return props.getProperty(key)
    } catch (FileNotFoundException e) {
        println("Specified file not found, please ensure it's in the root folder of the project")
    }
    return null
}

ext.secret = ["API_KEY": readProperty("WEATHER_API_KEY", secretsFile)]